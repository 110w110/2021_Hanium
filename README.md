## 2021 한이음 프로젝트 공모전  
스마트 안경을 이용한 똑쇼 (똑똑한 쇼핑) / 임의의팀  
  
### 프로젝트 개요
- 팀명 : 임의의팀
- 팀장 : 한태희
- 팀원 : 한태희 전수민 김지석 김민석
- 멘토 : 한주연 멘토님

## 2020 한이음 프로젝트 공모전  
스마트 안경을 이용한 똑쇼 (똑똑한 쇼핑) / 임의의팀  
(Smart Shopping Using Smart Glasses : Ttokshow)   
  
## 프로젝트 정보
#### 작품 정보
- 작품명 : Ttokshow (똑쇼)
- 프로젝트 기간 : 2021.3 ~ 2021.11
- 팀원 : 한태희(팀장), 김민석, 김지석, 전수민
- 멘토 : 한주연 멘토님 (KISA)

#### 작품 설명 : 
본 프로젝트의 스마트 안경은 부착된 카메라를 통해 쇼핑 중에 상품의 정보를 읽고, 인터넷상의 리뷰들을 빠르게 수집하여 사용자에게 알려준다. 사용자가 마트에서 상품을 선택할 때, 해당 상품의 리뷰를 인터넷에 직접 검색하지 않아도 손쉽게 이어폰으로 확인할 수 있어 더욱 편리하고 합리적인 쇼핑을 할 수 있게 된다. 
마트에 진열된 수많은 상품들을 보고 어떤 상품을 골라야 하는지 고민해 본 사람들은 알 것이다. 이제 스마트 안경을 통해 손쉽게 나에게 딱 맞는 상품을 선택함으로서 똑똑한 쇼핑을 해보자

#### [공모전 출품 영상 Link](https://youtu.be/Pcsiy823xeI)
<div align="center">
<img width="450" alt="image" src="https://user-images.githubusercontent.com/87888411/181168044-de8193a1-78af-4400-a223-bdaeb2c091d9.png">
</div>

## 작품 소개
### 1. 기획 의도
   - 리뷰를 찾아보기 위해서는 검색해야하는 번거로움이 따름 
   - 단계를 줄여줌으로써 편리성이 증가함
   - 결과적으로 소비자에게 맞는 상품을 손쉽게 찾게 해줘서 구매를 유도시킴
   
### 2. 작품 내용
   - ESP-32 CAM 아두이노 보드를 통한 영상 스트리밍 
   - WiFi 통신 및 포트포워딩을 통한 외부 접속 허용 
   - 스트리밍되는 영상에서 바코드 번호 추출 및 DB 내 상품 조회 
   - 상품 리뷰 크롤링 및 수집된 리뷰 분석하여 텍스트마이닝하여 DB에 저장 
   - 똑쇼 앱에서 상품을 조회하면 DB 내의 정보를 요약해주고 TTS를 활용하여 
   - 음성 출력 지원

## 작품의 개발배경 및 필요성

스마트워치, 무선이어폰 등 여러 가지 분야의 웨어러블 기기들이 상용화에 성공했지만 여전히 스마트 안경 분야는 개발이 부족한 상황이다. 
이미 수년 전 구글을 통해 '구글글래스'가 출시되었을 때 스마트 안경 시대가 금방 도래할 분위기였으나, 사생활 침해의 문제 등 여러 장벽에 부딪혀 발전이 늦춰진 상황이다.
이러한 스마트 안경을 우리 생활과 밀접한 분야인 쇼핑에 접목을 시키면 어떨까? 스마트 안경을 쇼핑에 접목 시켜 마트 내에서의 사용으로 제한한다면 사생활 침해 문제로부터는 자유로울 수 있다. 
우리는 쇼핑을 할 때 모든 구매품목에 대한 정보를 정확히 알고 구매하지는 않는다. 그저 눈에 쉽게 보이는 한정된 정보로 판단하며, 가끔은 직감에 따라 구매했다가 후회하는 경우도 적지 않다. 

<div align="center">
<img width="240" alt="image" src="https://user-images.githubusercontent.com/87888411/181168727-58ccf016-80f6-4a07-a2d2-5e0b2560e9a1.png">
</div>

특히 고령층으로 갈수록 인터넷에서 정보를 찾는데 어려움이 증가한다. 위 표에 따르면 소비자정보 접근성이 일반인은 7점 만점에 평균 5.9점인 반면 나이가 증가할수록 점수가 점점 떨어져 초고령노인은 평균 1.8점으로 나타나게 된다. 이를 해결하기 위해 스마트 안경을 통해 정보 수집 단계를 줄여 손쉽게 소비자 정보에 접근이 가능해져 쇼핑의 질을 높일 수 있다. 
쇼핑을 위해 준비된 스마트 안경이 다양한 상품들의 후기나 정보 등을 인터넷 상에서 찾아와 보기 좋게 정리해준다면 더욱 알차고 합리적인 쇼핑을 할 수 있을 것이다. 
또한 검색의 간소화로 짧은 시간에 다양한 상품 검색이 가능해져 더욱 빠르고 편리한 쇼핑이 가능할 것이다. 
본 프로젝트에서는 이런 아이디어에서 착안하어 바코드가 존재하는 상품들을 안경의 카메라 모듈을 통해 인식하고 데이터를 분석하여 정리해주는 프로토타입과 그와 연동된 모바일 앱을 만들어 내는 것이 주요 목적이다.

## 작품의 특징 및 장점 

1) 바코드 번호를 통해 상품을 검색하여 상품 정보를 보여주는 것은 많다. 하지만  실 사용자의 리뷰 정보를 종합적으로 분석하여 보여주는 것을 통해 사용자들의 합리적인 쇼핑에 많은 도움을 줄 것이다.
2) 스마트안경에서 발생하는 사생활 침해 이슈를 ‘똑쇼’는 사용 장소를 마트 내로제한하여 기존 개인용 스마트안경에서 발생하는 문제를 해결할 수 있다. 
3) 실제 스마트안경 시장이 발전이 더딘 상황에서 ‘똑쇼’가 좋은 예시가 되어 스마트안경 시장 발전에 이바지할 수 있다.
4) 스마트폰을 이용하여 리뷰를 확인할 수 있지만 검색을 하지 않고 스마트안경을 착용하여 원하는 상품의 바코드를 바라보기만 하여도 해당 상품의 정보, 평점, 리뷰 등을 확인할 수 있다. 이로써 편리성을 증대시키고 나아가 상품 비교 및 관리에 있어서 효율성 또한 증대시킬 수 있다.
5) 대부분의 상품에 대한 정보를 인터넷 상에서 검색할 수 있지만 ‘똑쇼’는 실시간으로 반영되는 새로운 리뷰들과 그 정보를 도식화한 자료를 한눈에 볼 수 있어 정보이용 취약계층 또한 손쉽게 사용할 수 있을 것이다.

## 작품 내용

### 1. 서비스 구성도
<div align="center">
<img width="450" alt="image" src="https://user-images.githubusercontent.com/87888411/181168942-e8f75a59-b33d-4f05-a10a-71e85d18a8fb.png">
</div>

### 2. 하드웨어 구성도
<div align="center">
<img width="450" alt="image" src="https://user-images.githubusercontent.com/87888411/181169618-ae58035e-a6a3-4a0e-80cd-a909aeb7cca0.png">
</div>

### 3. 센서 구성도
<div align="center">
<img width="450" alt="image" src="https://user-images.githubusercontent.com/87888411/181169507-85baa52e-6d4b-4626-badb-ae4de87fc3bb.png">
</div>

### 4. 알고리즘 명세서
<div align="center">
<img width="450" alt="image" src="https://user-images.githubusercontent.com/87888411/181169744-566f2245-11dd-459c-8d16-2b853f49727a.png">
</div>

### 5. 메뉴 구성도
<div align="center">
<img width="450" alt="image" src="https://user-images.githubusercontent.com/87888411/181170000-15d7201a-6562-44a7-89cf-030b6735bf3e.png">
</div>

### 6. 기능 처리
<div align="center">
<img width="450" alt="image" src="https://user-images.githubusercontent.com/87888411/181170082-f6af9176-835c-44c8-8567-832abac520ce.png">
</div>

### 7. E-R 다이어그램
<div align="center">
<img width="450" alt="image" src="https://user-images.githubusercontent.com/87888411/181170285-e72597a1-5365-41fd-a242-5c88ea04f366.png">
</div>

### 8. 테이블 정의서
<div align="center">
<img width="450" alt="image" src="https://user-images.githubusercontent.com/87888411/181170366-ba38551e-cea1-43d1-a14f-a5eedefea4c0.png">
</div>


#### SW 주요 기능
<div align="center">
<img width="458" alt="image" src="https://user-images.githubusercontent.com/87888411/181162828-eea63340-219a-46bd-9e38-c191facea67c.png">
</div>

#### HW 주요 기능
<div align="center">
<img width="458" alt="image" src="https://user-images.githubusercontent.com/87888411/181162951-96f49e02-a9c2-44fa-912b-cc0a86630654.png">
</div>

### 3. 주요 적용 기술
1) **Crawling + Labeling** : 
- Python Module 중 Selenium을 활용하여, Web 상에서 산불, 사람, 단풍 등의 다양한 Case image를 2,000여장 Crawling 하였다. 
- YOLO-mark master 툴을 이용하여 학습시킬 대상을 Labeling한다. 
- 본격적인 학습을 하기 전 중요한 데이터 전처리 작업이다. 

2) **darknet- YOLOv3** : 
- YOLO-mark master를 이용해 처리한 데이터들을 학습시키기 위한 알고리즘이다. 
- Github에 올라와 있는 오픈소스를 활용한다. 
- Darknet을 실행하고 train 옵션으로 darknet53.com.74 가중치 파일을 베이스로 약 33,000번 학습시킨다. 
- CUDA의 cuDNN 라이브러리를 이용하여 GPU를 활용한 더 빠른 학습이 가능하다. 
- 실시간으로 스트리밍 되고 있는 영상을 외부 PC 내의 Darknet detector 옵션으로 분석한다. 

3) **RaspberryPi Ubuntu Setting + Camera 연결 + streaming** : 
- Rasberry Pi 내에 Ubutu mate 16.04 OS를 설치 후, apt-get 버전관리 시스템을 이용하여 
- raspberry용 camera를 연결한다. 
- mjpg streaming을 이용하여 Rasberry Pi 카메라를 Web으로 Streaming 한다. 

4) **Drone 제작** : Raspberry pi와 pixhawk을 장착한 F450 QuadCopter drone 제작
- Pixhawk보드에 PX4 flight stack APP을 설치하여 QuadCopter 자체의 low-level control을 담당하고, Raspberry Pi에 ROS와 Ubuntu를 설치하여 Drone 제어와 영상처리를 한다. 
- Pixhawk와 Raspberry Pi는 mavros를 통해서 통신하며, Raspberry Pi에서 position이나 traject ory 등의 명령을 PX4 펌웨어에 전송하여 두 module 간 통신이 가능하게 한다. 
- Pixhawk가 Drone의 모터를 제어하고 Raspberry3는 ROS의 px4와 Mavros로 offboad control 을 하여 Drone의 자율비행과 회피기동 등을 제어한다. 

5) **email 보내기** : 
- Python의 smtp 라이브러리를 이용하여 E-Mail을 관리자에게 보냄. 

## 작품 사진

### 1. [Python/C++] Darknet: YOLO Mark
<div align="center">
<img width="777" alt="image" src="https://user-images.githubusercontent.com/87888411/181165408-d0d26d96-7e73-4248-894e-0781c33eeb7d.png">

<산불과 사람의 이미지를 인식하도록 라벨링>
</div>


<div align="center">
<img width="417" alt="image" src="https://user-images.githubusercontent.com/87888411/181165685-9e406311-943b-4b96-82e2-3bd5e2a87607.png">
<img width="401" alt="image" src="https://user-images.githubusercontent.com/87888411/181165722-bd1b40f9-6cfc-4e1e-ab2c-ddf431ca96dc.png">

<라벨링된 이미지를 Darknet을 활용하여 이미지를 학습>
</div>

## 작품 개발 환경
<div align="center">
<img width="751" alt="image" src="https://user-images.githubusercontent.com/87888411/181163789-0892f51c-1a7b-4336-8107-28e471594776.png">
</div>

##  작품의 기대효과 및 활용분야 

### 1. 작품의 기대효과
#### 1) **개인적 측면**: 
조난 상황 발생 시, 빠르고 정확하게 조치 받을 수 있을 것으로 기대된다. 또한 사람이 직접 발로 뛰며 상황을 분석할 필요 없이, Drone 조작만으로 산불을 예방하고 조난자를 구출할 수 있을 것이다. 
#### 2) **사회적 측면**: 
잠재적인 산불 상황 예방 또는 조난자 수색에 강력한 수사 도구로써 기능할 것으로 기대된다. 인력의 한계를 보완하고 시간 절약 및 경제적 비용 절감할 수 있을 것이다. 
#### 3) **개발 측면**: 
4차 산업의 핵심으로 조명 받는 Drone과 AI를 접목하여 산업의 발전을 이룰 수 있다. Drone과 AI의 사회적, 국가적 기능을 증명할 수 있는 기회가 될 것으로 기대된다. 
#### 4) **비즈니스적 측면**: 
특정 기업이 Drone을 활용해 공공의 이익에 힘쓰고 있다는 좋은 이미지를 활용해 자연스럽게 브랜드 이미지를 도움을 줄 것이다. 더 나아가 사람들의 자발적인 도네이션을 받기도 하고, 스폰계약을 받아 스폰서 광고를 통한 재정적 이익을 발생시킬 수 있을 것으로 기대된다. 
#### 5) **군사안보적 측면**: 
AI Drone을 군사용으로 응용한다면, 감시가 소홀한 울타리 외 철책 주변 산악지형을 반복적으로 탐사하면서 더욱 면밀한 감시체계를 구축할 수 있을 것이다.

### 2. 작품의 활용분야
- YOLO 알고리즘을 활용한 조난자 수색을 통해 AI Drone의 사회적 활용
- 소방청과 협력하여 AI Drone을 활용한 산악지형의 잠재적 산불의 예방에 활용
- 부가적으로 Drone의 시각적 효과를 이용해 브랜드 가치를 만들고, 사회적 기업활동이나 인접 사업에 대한 홍보까지 발전 가능
- Drone이 목표물을 인식하고 스스로 분석할 수 있게 된다면 조난자 수색 및 산불 감지 목적으로 쓰이는 Drone을 감시, 관리 등의 방범용, 순찰용 등 다양한 사회적 분야로 활용 가능. - 실외 재해 현장에서만 활용하던 소형 Drone을 화재 건물과 같은 실내 현장에도 투입
- 최종적으로는 지속적인 감시를 통하여 위험 요소를 사전에 파악하여 선제적인 대응

## 프로젝트 추진 과정에서의 문제점 및 해결방안 

### 1. 프로젝트 관리 측면 
#### 1) COVID-19 이슈
코로나 문제로 인하여 모임은 여러 번 가질 수 없었고, 줌과 팀즈를 이용하여 회의를
진행하였지만 화면 공유만으로는 Rasberry Pi나 Drone 등 하드웨어 부품의 자세한 공유가
진행되지 않아 불편함이 있었다. 

**해결방안**: 오프라인 모임이 부족했기 때문에, 한 번 모일 때 할 일들을 사전에 꼼꼼히 정리하여
문제해결에 효율성을 늘리기 위해 노력하였다.

#### 2) 주제에 대한 기초지식 부족
AI Drone 분야는 팀원 모두에게 생소한 분야였기 때문에, 프로젝트 시작부터 문제해결까지
대부분의 과정에서 생기는 이슈들을 해결하기 어려웠다. 

**해결방안**: 모르는 부분은 최대한 구글링과 멘토님의 조언을 통해 해결하려고 노력하였다. 그럼에도 해결되지 않은 부분은 팀원들의 다양한 의견을 수렴하여 여러 방면으로 시도하여 성공하는 방법을 택하였다. 결론적으로 팀원 모두 생소한 분야였지만, 프로젝트가 진행 될수록 각자의 위치에서 공부가 많이 되었고, 문제 해결에 능숙하게 되었다.

### 2. 작품 개발 측면 

#### 1) 조난자 수색을 어떻게 할 것인지에 대해 의견 충돌의 문제점이 있었다. 

**해결방안**: 팀원들의 의견을 종합하고 멘토님의 조언을 바탕으로, 가장 현실적으로 개발이 가능한 방법을 택하였다.

#### 2) 개발을 진행하는 중에 보유한 장비의 성능에 한계가 있어서 기존의 계획을 다소 수정하게되었고, 개발방향과 개발 우선순위의 변경으로 인해 프로젝트 진행이 지체되었다. 

**해결방안**: 대안 방안을 찾으려고 노력하였고 그때마다 온·오프라인 회의를 통해 해결하였다.

#### 3) H/W 개발에 필요한 부품이 누락되어, 오프라인 미팅 시간에 제대로 된 개발이 진행되지 못하는 경우가 발생했다. 

**해결방안**: 필요한 부품 구매를 인터넷 배송으로 신청하였고, 지체되는 시간을 프로젝트 진행의
중간 점검 시간으로 활용하였다. 또한 이런 일이 일어나지 않도록 다음 오프라인 모임을 가지기
전에 미리 필요한 것들을 확인하게 되었다. 

## 프로젝트를 통해 배우거나 느낀 점 
- 프로젝트 일정관리의 중요성을 깨닫고, 더욱 체계적인 계획을 세울 수 있게 되었다. 
- 팀원 모두의 일정을 맞추기 어렵기 때문에, 정해진 요일을 정기적으로 잡아서 프로젝트에 전념할 수 있도록 하는 것이 효율적이라는 것을 깨달았다. 
- Git과 Notion 등과 같은 협업 도구 다루는 법을 새롭게 배웠다. 
- 프로젝트 진행을 통해 기획, 설계, 구현, 테스트에 이르는 전반적인 과정을 학습했다. 
- Drone의 구동원리를 이해하고 활용할 수 있게 되었다. 
- 인공지능 YOLO 알고리즘을 활용하면서 인공지능 분야의 현주소를 체감하고, 더 많은 관심을 가지게 되었다. 
- 서버 구현과 기기와 서버 간 통신기능을 학습했다. 
- 프로젝트 진행 중 발생하는 문제, 체크해야 할 이슈 및 리스크를 관리하고 해결해나가는 과정을 배웠다. 
- 팀원 간의 의견을 조율하면서 팀워크를 새롭게 다졌다.


[한이음 최종보고서_AI 드론을 이용한 산불감지 및 조난자 위치 수색.pdf](https://github.com/110w110/2020_Hanium/files/6969775/_AI.pdf)

## 수상 실적
<div align="center">
<img width="396" alt="image" src="https://user-images.githubusercontent.com/87888411/181165021-b2318658-c017-4443-884c-e606746accad.png">
</div>
